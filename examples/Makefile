EXAMPLES = vsum vsum2 spmv spmv2 \
    jac1d jac2d jac2d-ser jac3d \
    markov-ser markov

OPT = -g

# include Makefile.config if existing
# this is generated by 'configure'
-include ../Makefile.config

CFLAGS = $(OPT) -std=gnu99 -I../include
CFLAGS += $(DEFS)
LAIKLIB = $(abspath ../liblaik.so)

all: $(EXAMPLES)

vsum: vsum.o $(LAIKLIB)

vsum2: vsum2.o $(LAIKLIB)

spmv: spmv.o $(LAIKLIB)

spmv2: spmv2.c $(LAIKLIB)
	$(CC) $(CFLAGS) $(OMP_FLAGS) spmv2.c $(LAIKLIB) -o spmv2

jac1d: jac1d.c $(LAIKLIB)
	$(CC) $(CFLAGS) $(OMP_FLAGS) jac1d.c $(LAIKLIB) -o jac1d

jac2d: jac2d.c $(LAIKLIB)
	$(CC) $(CFLAGS) $(OMP_FLAGS) jac2d.c $(LAIKLIB) -o jac2d

jac3d: jac3d.c $(LAIKLIB)
	$(CC) $(CFLAGS) $(OMP_FLAGS) jac3d.c $(LAIKLIB) -o jac3d

markov: markov.o $(LAIKLIB)
	$(CC) $(CFLAGS) markov.o $(LAIKLIB) -o markov

clean:
	rm -f *.o *~ $(EXAMPLES)
